<div class="border p-3 mb-3 rounded">
  <div class="col-lg-6">
    <div>
      <input
        class="form-control form-control-sm ps-5"
        type="text"
        style="
          border-radius: 5px;

          height: 35px;
          width: 200px;
          border: 1px #838383 solid;
        "
        placeholder="Search"
        (keydown.enter)="search()"
        [formControl]="searchName" />
      @if (!isLoading) {
        <button
          style="bottom: 15px"
          class="btn bg-transparent text-dark position-relative translate-middle-y"
          type="submit"
          (click)="search()">
          <i class="fa-solid fa-search fs-7"></i>
        </button>
      }
      @if (isLoading) {
        <span
          style="bottom: 15px"
          class="btn bg-transparent position-relative translate-middle-y text-dark"
          ><i class="fas fa-spinner fa-pulse"></i
        ></span>
      }
    </div>
  </div>

  <div class="row w-100 p-1 mx-1">
    <div class="col-md-1"><span>Date</span></div>
    <div class="col"><span>Amount</span></div>
    <div class="col-md-3"><span>Account</span></div>
    <div class="col-md-3"><span>Reference</span></div>
    <div class="col-md-2"><span>Merchant reference </span></div>
    <div class="col"><span>status</span></div>
  </div>
  @if (!response_data || isLoading) {
    <div class="col justify-content-center">
      @for (_ of [1, 2, 3, 4]; track $index) {
        <div class="col mb-4">
          <app-skeleton [width]="'100%'" [height]="'50px'" classes="sm-radius">
          </app-skeleton>
        </div>
      }
    </div>
  }

  @if (response_data && data_list && data_list.length > 0 && !isLoading) {
    <div class="col p-3">
      @for (item of data_list; track item) {
        <div
          class="row p-1 border rounded mb-2 fs-small d-flex align-items-center">
          @for (data of item; track data) {
            @if (data.format === 'date') {
              <div class="col-md-1 text-truncate">
                <span>{{ data.value }}</span>
              </div>
            }
            @if (data.format === 'currency') {
              <div class="col">
                <span>{{ data.value }}</span>
              </div>
            }
            @if (data.format === 'account') {
              <div class="col-md-3">
                <span>{{ data.value }}</span>
              </div>
            }
            @if (data.format === 'reference') {
              <div class="col-md-3">
                <span>{{ data.value }}</span>
              </div>
            }
            @if (data.format === 'merchant') {
              <div class="col-md-2">
                <span>{{ data.value }}</span>
              </div>
            }
            @if (data.format === 'status') {
              <div class="col">
                <span
                  class="badge-design badge bg-success text-success d-flex justify-content-center align-items-center"
                  >{{ data.value }}</span
                >
              </div>
            }
          }
        </div>
      }

      @if (response_data && data_list && data_list.length > 0) {
        <div class="d-flex" style="bottom: 90px; position: inherit">
          <div class="ms-auto">
            <div class="d-flex" style="position: relative">
              <div>
                <b class="text-dark">Page size</b>
              </div>
              <div
                class="ps-2"
                style="position: absolute; bottom: 0px; margin-left: 75px">
                @if (displayPaginationLimit && clientPagination.filters.limit) {
                  <div
                    id="pagination"
                    class="text-dark text-center bg-secondary">
                    @for (limit of paginationsLimit; track limit) {
                      <div>
                        <div
                          tabindex="0"
                          role="button"
                          class="w-100"
                          (click)="selectPagintationLimit(limit)"
                          [ngClass]="
                            theme === 'magis-light'
                              ? limit !== clientPagination.filters.limit
                                ? canMoveNext(limit) === true
                                  ? 'disabled selectedLimitLightBg'
                                  : 'selectedLimitLightBg'
                                : 'sortLightBg'
                              : theme === 'magis-dark'
                                ? limit !== clientPagination.filters.limit
                                  ? canMoveNext(limit) === true
                                    ? 'disabled selectedLimitDarkBg'
                                    : 'selectedLimitDarkBg'
                                  : 'sortDarkBg'
                                : theme === 'light-mode'
                                  ? limit !== clientPagination.filters.limit
                                    ? canMoveNext(limit) === true
                                      ? 'disabled level-2'
                                      : 'level-2'
                                    : 'level-1'
                                  : theme === 'dark-mode'
                                    ? limit !== clientPagination.filters.limit
                                      ? canMoveNext(limit) === true
                                        ? 'disabled level-3'
                                        : 'level-3'
                                      : 'level-2'
                                    : ''
                          ">
                          <b class="center1">{{ limit }}</b>
                        </div>
                      </div>
                    }
                  </div>
                }
                <div
                  tabindex="0"
                  class="d-flex text-dark"
                  [ngClass]="
                    theme === 'magis-dark'
                      ? 'selectedLimitDarkBg'
                      : theme === 'dark-mode'
                        ? 'bg-light'
                        : 'selectedLimitLightBg'
                  "
                  style="border-radius: 2px"
                  role="button"
                  (click)="openPagination()">
                  <div>
                    <span class="m-1">{{
                      clientPagination.filters.limit
                    }}</span>
                  </div>
                  <div
                    class="ps-2 pe-2 ms-2"
                    [ngClass]="
                      theme === 'magis-dark'
                        ? 'sortDarkBg'
                        : theme === 'dark-mode'
                          ? 'level-3'
                          : 'sortLightBg'
                    "
                    style="
                      border-top-right-radius: 2px;
                      border-bottom-right-radius: 2px;
                    ">
                    <span>
                      <i class="fa-solid fa-sort-down"></i>
                    </span>
                  </div>
                </div>
              </div>
              <!-- <div class="d-flex">
                <span class=""></span>
                <div><i class="fa-solid fa-sort-down"></i> </div>
            </div> -->
            </div>
          </div>
          <div class="ms-auto">
            <button
              class="btn btn-sm btn-light rounded me-2"
              [disabled]="currentPage === 0"
              (click)="doListMove('prev')">
              <i class="fa-solid fa-angle-left"></i>
            </button>
            @if (clientPagination.filters.limit) {
              <button
                class="btn btn-sm btn-light rounded me-2"
                (click)="doListMove('next')">
                <i class="fa-solid fa-angle-right"></i>
              </button>
            }
            <small
              ><i class="text-dark"
                >Page {{ currentPage + 1 }} of {{ pages + 1 }}</i
              ></small
            >
          </div>
          <div class="ms-auto">
            @if (!showNotification) {
              <div class="">
                <!-- @if (!isExporting) {
            <b
                class="text-primary"
                role="button"
                
                
                >Export Excel</b
            >} -->
                <!-- @if (isExporting) {
            <b
                >exporting excel ... {{ exportingState }} %
                <span class="ms-2" title="Refresh"
                    ><i class="fa-solid fa-arrows-rotate"></i></span
            ></b>} -->
              </div>
            }
            @if (showNotification) {
              <div
                class="p-2 ps-4 pe-4 notification-success"
                style="max-width: 300px">
                <div class="d-flex">
                  <div style="margin-top: auto; margin-bottom: auto">
                    <span>
                      <i
                        class="fa-solid fa-circle-check me-2 text-success fs-5"></i
                    ></span>
                  </div>
                  <!-- <div>
                    <b style="font-size: 14px">Successfully Exported</b>
                </div> -->
                </div>
              </div>
            }
          </div>
        </div>
      }
    </div>
  }
</div>
